pluginManagement {
    def gradlePluginPath = ["node", "--print", "require.resolve('@react-native/gradle-plugin/package.json', { paths: [require.resolve('react-native/package.json')] })"]
        .execute(null, rootDir).text.trim()

    if (gradlePluginPath) {
        includeBuild(new File(gradlePluginPath).getParentFile().toString())
    }
}

rootProject.name = 'Houzx'

dependencyResolutionManagement {
    versionCatalogs {
        reactAndroidLibs {
            def rnPath = ["node", "--print", "require.resolve('react-native/package.json')"]
                .execute(null, rootDir).text.trim()

            if (rnPath) {
                from(files(new File(rnPath, "../gradle/libs.versions.toml")))
            }
        }
    }
}

// Only apply autolinking if expo module is available
def expoPath = ["node", "--print", "require.resolve('expo/package.json')"]
    .execute(null, rootDir).text.trim()

if (expoPath) {
    def autolinkScript = new File(expoPath, "../scripts/autolinking.gradle")
    if (autolinkScript.exists()) {
        apply from: autolinkScript
    }
}

include ':app'
